{% extends 'base.html' %}
{% load static %}
{% block content %}



    <div class="button">
        <div class="button-dash">
            <a class="button-element" href="{% url 'new_customer' %}">                
                <span>Créer</span>
            </a>
            <a class="button-element button-scan" href="{% url 'scanner' %}">                
                <span>Scan</span>
            </a>
        </div>
    </div>
    <br><br>

    <div class="tab-list tableau-dash">
        <input id="searchbar" onkeyup="recherche()" type="text" name="search" placeholder="Recherche...">
        <table>
            <thead>
                <tr class="ext_tab_title">
                    <th>En attente</th>
                    <th>En cours</th>
                    <th>A récupéré</th>
                    <th>A livré</th>
                    <th>Terminé</th>
                </tr>
            </thead>
            <tbody>                 
                {% for customer in list_customer %}
                    <tr class="searchable">
                        <td>{% if customer.status == 1  %}<a href="{% url 'info_customer' customer.id %}" style="background: #830000; color: #FFFFFF;">{{ customer.nom }} {{ customer.prenom }}</a>{% endif %}</td>
                        <td>{% if customer.status == 2  %}<a href="{% url 'info_customer' customer.id %}" style="background: #ffe70f; color: #000000;">{{ customer.nom }} {{ customer.prenom }} <br> <span style="color: #830000;font-size: 16;">Atelier granite</span></a>{% endif %}  
                        {% if customer.status == 3  %}<a href="{% url 'info_customer' customer.id %}" style="background: #ffe70f; color: #000000;">{{ customer.nom }} {{ customer.prenom }} <br> <span style="color: #830000;font-size: 16;">Atelier plinthe</span></a>{% endif %}</td>                          
                        <td>{% if customer.status == 4  %}<a href="{% url 'info_customer' customer.id %}" style="background: #008325; color: #000000;">{{ customer.nom }} {{ customer.prenom }}</a>{% endif %}</td>                      
                        <td>{% if customer.status == 5  %}<a href="{% url 'info_customer' customer.id %}" style="background: #008325; color: #000000;">{{ customer.nom }} {{ customer.prenom }}</a>{% endif %}</td>                             
                        <td>{% if customer.status == 6  %}<a href="{% url 'info_customer' customer.id %}" style="background: #000d83; color: #FFFFFF;">{{ customer.nom }} {{ customer.prenom }}</a>{% endif %}</td>
                    </tr>                     
                {% endfor %} 
            </tbody>
        </table>

        <div class="cards-dash">
            {% for customer in list_customer %}
                {% if customer.status == 1  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #830000; color: #FFFFFF; margin-top: 15px;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>
                        <p>En attente</p>
                    </a>
                {% endif %}
                {% if customer.status == 2  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #ffe70f; color: #000000; margin-top: 15px;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>
                        <p>En cours</p>
                        <p style="color: #830000;font-size: 16;"></p>>Atelier granite</p>
                    </a>
                {% endif %}
                {% if customer.status == 3  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #ffe70f; color: #000000; margin-top: 15px;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>                
                        <p>En cours</p>
                        <p style="color: #830000;font-size: 16;">Atelier plinthe</p>
                    </a>
                {% endif %}
                {% if customer.status == 4  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #008325; color: #000000; margin-top: 15px;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>
                        <p>A récupéré</p>
                    </a>
                {% endif %}
                {% if customer.status == 5  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #008325; color: #000000; margin-top: 15px;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>
                        <p>A livré</p>
                    </a>
                {% endif %}
                {% if customer.status == 6  %}
                    <a href="{% url 'info_customer' customer.id %}" class="card-dash searchable" style="background: #000d83; color: #FFFFFF;">
                        <h2>{{ customer.nom }} {{ customer.prenom }}</h2>
                        <p>Livré</p>
                    </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        function recherche() {
            let input = document.getElementById('searchbar').value;
            input = input.toLowerCase();
            let vam = document.getElementsByClassName('searchable');
        
            for (i = 0; i < vam.length; i ++) {
                if (! vam[i].innerHTML.toLowerCase().includes(input)) {
                    vam[i].style.display = "none";
                } else {
                    vam[i].style.display = "";
                }
            }
        }
    </script>
{% endblock %}

{% block css %}
    <style>
        #searchbar {
            width: 50%;
        }

        @media (max-width: 1500px) {
            #searchbar {
                width: 100%;
            }
        }
    </style>
{% endblock %}



